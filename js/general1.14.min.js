function randomString(e){for(var r="";e--;)r+=String.fromCharCode((r=62*Math.random()|0,r+=r>9?r<36?55:61:48));return r}function flyToElement(e,r){$(this);var t=$(e).clone();$(t).css({position:"absolute",top:$(e).offset().top+"px",left:$(e).offset().left+"px",opacity:1,"z-index":1e3,height:"100px"}),$("body").append($(t));var a=$(r).offset().left+$(r).width()/2-$(e).width()/3/2,o=$(r).offset().top+$(r).height()/2-$(e).height()/3/2;$(t).animate({opacity:.4,left:a,top:o,width:$(e).width()/3,height:$(e).height()/3},700,function(){$(r).fadeOut("fast",function(){$(r).fadeIn("fast",function(){$(t).fadeOut("fast",function(){$(t).remove()})})})});var s=+$("#cart-num").text()+1;$("#cart-num").text(s)}function addToCart(e){$.post("order_process.php",{type:"update-cart",book_id:e},function(e){0==e&&$("#carteerror").modal("show")})}$(window).on("load",function(){-1!=window.location.href.indexOf("#login")&&$("#login").modal("show"),-1!=window.location.href.indexOf("#registrationsuccess")&&$("#registrationsuccess").modal("show"),-1!=window.location.href.indexOf("#validatesuccess")&&$("#validatesuccess").modal("show"),-1!=window.location.href.indexOf("#validateerror")&&$("#validateerror").modal("show"),-1!=window.location.href.indexOf("#loginsuccess")&&$("#loginsuccess").modal("show");var e=new Date;if(e.setSeconds(e.getMinutes()+60),document.cookie="cookie_graf_test=1; expires="+e.toGMTString(),-1!=document.cookie.indexOf("cookie_graf_test=")||alert("Aktiveer asb jou leser se 'cookies' wanneer jy Graffiti besoek!\n\nPlease activate your browser cookies when visiting Grafitti!"),$("#backButton").click(function(){return parent.history.back(),!1}),$("#registerSubmit").click(function(e){$("#register_complete").fadeOut(500),$("#register_password").fadeOut(500),$("#register_error").fadeOut(500),$("#register_double").fadeOut(500),e.preventDefault();var r=!1,t=$("#type").val(),a=$("#registerForm #firstname").val(),o=$("#registerForm #surname").val(),s=$("#registerForm #email").val(),i=$("#registerForm #postal_address1").val(),d=$("#registerForm #postal_city").val(),l=$("#registerForm #postal_province").val(),c=$("#registerForm #postal_code").val(),n=$("#registerForm #phone").val();if("register"==t)var p=$("#registerForm #password").val(),h=$("#registerForm #password2").val();if(0==a.length){r=!0;$("#registerForm #firstname").addClass("validation")}else $("#registerForm #firstname").removeClass("validation");if(0==o.length){r=!0;$("#registerForm #surname").addClass("validation")}else $("#registerForm #surname").removeClass("validation");if(0==s.length){r=!0;$("#registerForm #email").addClass("validation")}else $("#registerForm #email").removeClass("validation");if(0==i.length){r=!0;$("#registerForm #postal_address1").addClass("validation")}else $("#registerForm #postal_address1").removeClass("validation");if(0==d.length){r=!0;$("#registerForm #postal_city").addClass("validation")}else $("#registerForm #postal_city").removeClass("validation");if(0==l.length){r=!0;$("#registerForm #postal_province").addClass("validation")}else $("#registerForm #postal_province").removeClass("validation");if(0==c.length){r=!0;$("#registerForm #postal_code").addClass("validation")}else $("#registerForm #postal_code").removeClass("validation");if(0==n.length){r=!0;$("#registerForm #phone").addClass("validation")}else $("#registerForm #phone").removeClass("validation");if("register"==t){if(0==p.length){r=!0;$("#registerForm #password").addClass("validation")}else $("#registerForm #password").removeClass("validation");if(h!=p){r=!0;$("#registerForm #password2").addClass("validation"),$("#registerForm #password").val(),$("#registerForm #password2").val(),$("#registerForm #register_password").fadeIn(500)}else $("#registerForm #password2").removeClass("validation"),$("#registerForm #register_password").fadeOut(500);if(0==grecaptcha.getResponse().length){r=!0;$(".g-recaptcha div div").css("border","1px solid #DA391E"),$(".g-recaptcha div div").css("background-color","#DA391E")}else $(".g-recaptcha div div").css("border","0px"),$(".g-recaptcha div div").css("background-color","transparent"),$("#registerForm #register_complete").fadeOut(500),$("#registerForm #register_password").fadeOut(500),$("#registerForm #register_double").fadeOut(500),$("#registerForm #register_error").fadeOut(500)}0==r?$.post("process.php",$("#registerForm").serialize(),function(e){"send"==e?($("#registerForm #register_success").fadeIn(500),$("#registerForm #register_complete").fadeOut(500),$("#registerForm #register_password").fadeOut(500),$("#registerForm #register_double").fadeOut(500),$("#registerForm #register_error").fadeOut(500),$("#registerForm :input").attr("disabled",!0),$("#registerForm :input").addClass("readonly"),$("#registerForm :button").attr("disabled",!0)):"profile-success"==e?($("#registerForm #profile_success").fadeIn(500),$("#registerForm #register_success").fadeOut(500),$("#registerForm #register_complete").fadeOut(500),$("#registerForm #register_password").fadeOut(500),$("#registerForm #register_double").fadeOut(500),$("#registerForm #register_error").fadeOut(500),$("#registerForm :input").attr("disabled",!0),$("#registerForm :input").addClass("readonly"),$("#registerForm :button").attr("disabled",!0)):"error"==e?($("#registerForm #register_complete").fadeOut(500),$("#registerForm #register_password").fadeOut(500),$("#registerForm #register_double").fadeOut(500),$("#registerForm #register_error").fadeIn(500)):"profile-error"==e?($("#registerForm #register_complete").fadeOut(500),$("#registerForm #register_password").fadeOut(500),$("#registerForm #register_double").fadeOut(500),$("#registerForm #register_error").fadeIn(500)):"double"==e&&($("#registerForm #register_complete").fadeOut(500),$("#registerForm #register_password").fadeOut(500),$("#registerForm #register_error").fadeOut(500),$("#registerForm #register_double").fadeIn(500))}):$("#registerForm #register_complete").fadeIn(500)}),$("#changePasswordSubmit").click(function(e){var r=$(this).attr("data-src");$("#passwordForm #password_success").fadeOut(500),$("#passwordForm #password_complete").fadeOut(500),$("#passwordForm #password_password").fadeOut(500),$("#passwordForm #password_error").fadeOut(500),$("#passwordForm #password_client_id").val(r),$("#passwordForm :input").attr("disabled",!1),$("#passwordForm :input").removeClass("readonly"),$("#passwordForm :button").attr("disabled",!1),$("#passwordForm #passwordClose").attr("disabled",!1)}),$("#passwordSubmit").click(function(e){$("#password_complete").fadeOut(500),$("#password_password").fadeOut(500),e.preventDefault();var r=!1,t=$("#passwordForm #change_password").val(),a=$("#passwordForm #change_password2").val();if(0==t.length){r=!0;$("#passwordForm #change_password").addClass("validation")}else $("#passwordForm #change_password").removeClass("validation");if(a!=t){r=!0;$("#passwordForm #change_password").addClass("validation"),$("#passwordForm #change_password2").addClass("validation"),$("#passwordForm #change_password").val(),$("#passwordForm #change_password2").val(),$("#passwordForm #password_password").fadeIn(500)}else $("#passwordForm #change_password").removeClass("validation"),$("#passwordForm #change_password2").removeClass("validation"),$("#passwordForm #password_password").fadeOut(500);0==r?$.post("process.php",$("#passwordForm").serialize(),function(e){"password-success"==e?($("#passwordForm #password_success").fadeIn(500),$("#passwordForm #password_complete").fadeOut(500),$("#passwordForm #password_password").fadeOut(500),$("#passwordForm #password_error").fadeOut(500),$("#passwordForm :input").attr("disabled",!0),$("#passwordForm :input").addClass("readonly"),$("#passwordForm :button").attr("disabled",!0),$("#passwordForm #passwordClose").attr("disabled",!1)):"password-error"==e&&($("#passwordForm #password_complete").fadeOut(500),$("#passwordForm #password_password").fadeOut(500),$("#passwordForm #password_success").fadeOut(500),$("#passwordForm #password_error").fadeIn(500))}):$("#passwordForm #password_complete").fadeIn(500)}),$("#passwordResetSubmit").click(function(e){$("#reset_complete").fadeOut(500),$("#reset_success").fadeOut(500),$("#reset_error").fadeOut(500),$("#reset_not_exist").fadeOut(500),e.preventDefault();var r=!1;if(0==$("#password_reset #username").val().length){r=!0;$("#password_reset #username").addClass("validation")}else $("#password_reset #username").removeClass("validation");0==r?$.post("process.php",$("#passwordResetForm").serialize(),function(e){"reset_success"==e?($("#reset_success").fadeIn(500),$("#reset_complete").fadeOut(500),$("#reset_error").fadeOut(500),$("#reset_not_exist").fadeOut(500)):"reset_error"==e?($("#reset_complete").fadeOut(500),$("#reset_not_exist").fadeOut(500),$("#reset_success").fadeOut(500),$("#reset_error").fadeIn(500)):"not_exist"==e&&($("#reset_complete").fadeOut(500),$("#reset_complete").fadeOut(500),$("#reset_error").fadeOut(500),$("#reset_not_exist").fadeIn(500))}):$("#reset_complete").fadeIn(500)}),$("#loginSubmit").click(function(e){$("#login_error").fadeOut(500),$("#login_complete").fadeOut(500),$("#login_many").fadeOut(500),e.preventDefault();var r=!1,t=$("#login #login_username").val(),a=$("#login #login_password").val(),o=$("#login #login_language").val(),s=$("#login #redirect-url").val();s.replace("/en/","/"+o+"/"),s.replace("/af/","/"+o+"/");if(0==t.length){r=!0;$("#login #username").addClass("validation")}else $("#login #username").removeClass("validation");if(0==a.length){r=!0;$("#login #password").addClass("validation")}else $("#login #password").removeClass("validation");0==r?$.post("process.php",$("#loginForm").serialize(),function(e){"success"==e?($("#login_error").fadeOut(500),$("#login_complete").fadeOut(500),$("#login_many").fadeOut(500),$("#login").modal("hide"),"af"==o?window.location.href="af/Tuisblad":"en"==o&&(window.location.href="en/Home")):"error"==e?($("#login_complete").fadeOut(500),$("#login_many").fadeOut(500),$("#login_error").fadeIn(500)):"attempts"==e&&($("#login_complete").fadeOut(500),$("#login_error").fadeOut(500),$("#login_many").fadeIn(500))}):$("#login_complete").fadeIn(500)}),$("#myCarousel").carousel({interval:4e3}),$("#featured").carousel({interval:4e3}),$("[id^=cart-number]").on("change keyup paste",function(){var e=$("#searchForm #language").val();if("af"==e)var r="Jammer, jou aantal boeke kon nie verander word nie! Probeer asseblief weer.\n\nKontak Graffiti indien die fout herhaaldelik voorkom.";else if("en"==e)r="An error occurred. The number of book could not be updated. Please try again.\n\nPlease contact Graffiti if the error is not resolved.";var t=$(this).attr("data-src"),a=$(this).val(),o=$("#cart-total-price-"+t).attr("data-src"),s=a*o,i=$(this).attr("data-book");$("#cart-total-price-"+t).html("R "+s),$.fn.calculateTotalBookCost(),$.post("order_process.php",{type:"update-cart-on-checkout",temp_cart_id:t,book_number:a,book_id:i},function(e){if(0==e)alert(r);else if(1==e){if(a>2)return $("#big-order-message").fadeIn(),!1;$("#big-order-message").fadeOut()}})}),$("[id^=remove-book-]").click(function(e){var r=$(this).attr("data-src"),t=$("#searchForm #language").val();if("af"==t)var a="Is jy seker jy wil die boek uit jou mandjie verwyder?\n\nKlik 'OK' om voort te gaan!",o="Jammer, die boek is nie verwyder uit jou mandjie nie! Probeer asseblief weer.\n\nKontak Graffiti indien die fout herhaaldelik voorkom.";else if("en"==t)a="Are you sure you want to remove this book from your cart?\n\nClick'OK' to continue!",o="An error occurred. The book was not deleted from your cart. Please try again.\n\nPlease contact Graffiti if the error is not resolved.";confirm(a)&&$.post("order_process.php",{type:"delete-book",temp_cart_id:r},function(e){"error"==e?alert(o):window.location.reload()})}),$("[id^=remove-wish-book-]").click(function(e){var r=$(this).attr("data-src"),t=$(this).attr("data-url"),a=$("#searchForm #language").val();if("af"==a)var o="Is jy seker jy wil die boek uit jou wenslys verwyder?\n\nKlik 'OK' om voort te gaan!",s="Jammer, die boek is nie verwyder uit jou wenslys nie! Probeer asseblief weer.\n\nKontak Graffiti indien die fout herhaaldelik voorkom.";else if("en"==a)o="Are you sure you want to remove this book from your wish list?\n\nClick'OK' to continue!",s="An error occurred. The book was not deleted from your wish list. Please try again.\n\nPlease contact Graffiti if the error is not resolved.";confirm(o)&&$.post("order_process.php",{type:"delete-wish-book",wish_id:r},function(e){"error"==e?alert(s):window.location.href=t})}),$.fn.calculateTotalBookCost=function(){var e=0;$("[id^=cart-total-price-]").each(function(){var r=$(this).text().substring(2);e+=parseFloat(r),$("#cart-total-all-books-price").html("R "+e),$("#total-price").val(e)})},$("[id^=move-to-wishlist]").click(function(e){var r=$("#searchForm #language").val();if("af"==r)var t="Jammer, die boek is nie na jou wenslys geskuif nie! Probeer asseblief weer.\n\nKontak Graffiti indien die fout herhaaldelik voorkom.";else if("en"==r)t="An error occurred. The book was not moved to your wishlist. Please try again.\n\nPlease contact Graffiti if the error is not resolved.";var a=$(this).attr("data-src"),o=$(this).attr("data-book");$.post("order_process.php",{type:"move-book",temp_cart_id:a,book_id:o},function(e){"error"==e?alert(t):window.location.reload()})}),$("[id^=add-to-wishlist]").click(function(e){var r=$("#searchForm #language").val();if("af"==r)var t="Jammer, die boek is nie in jou wenslys gelaai nie! Probeer asseblief weer.\n\nKontak Graffiti indien die fout herhaaldelik voorkom.";else if("en"==r)t="An error occurred. The book was not added to your wishlist. Please try again.\n\nPlease contact Graffiti if the error is not resolved.";var a=$(this).attr("data-book");$.post("order_process.php",{type:"add-wishlist-book",book_id:a},function(e){"error"==e?(alert(t),$("#wishlist_double"+a).fadeOut(500),$("#wishlist_success"+a).fadeOut(500)):"double"==e?($("#add-to-wishlist"+a).fadeOut(500),$("#wishlist_double"+a).fadeIn(500),$("#wishlist_success"+a).fadeOut(500)):($("#add-to-wishlist"+a).fadeOut(500),$("#wishlist_double"+a).fadeOut(500),$("#wishlist_success"+a).fadeIn(500))})}),$("[id^=delivery-]").click(function(e){$("#orderCourierForm #deliver_address1").val(""),$("#orderCourierForm #deliver_address2").val(""),$("#orderCourierForm #deliver_city").val(""),$("#orderCourierForm #deliver_province").val(""),$("#orderCourierForm #deliver_country").val(""),$("#orderCourierForm #deliver_code").val(""),$("#orderCourierForm #courier-detail").val("");var r=$(this).attr("data-src");$(this).is(":checked")?($("#delivery_address_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500),"postal"==r?($("#delivery-physical").prop("checked",!1),$("#physical-check").removeClass("selected-div"),$("#delivery-new").prop("checked",!1),$("#new-check").removeClass("selected-div"),$("#postal-check").addClass("selected-div")):"physical"==r?($("#delivery-postal").prop("checked",!1),$("#postal-check").removeClass("selected-div"),$("#delivery-new").prop("checked",!1),$("#new-check").removeClass("selected-div"),$("#physical-check").addClass("selected-div")):"new"==r&&($("#new_1, #new_2, #new_city, #new_province, #new_country, #new_code").prop("disabled",!1),$("#delivery-postal").prop("checked",!1),$("#postal-check").removeClass("selected-div"),$("#delivery-physical").prop("checked",!1),$("#physical-check").removeClass("selected-div"),$("#new-check").addClass("selected-div"))):$("#"+r+"-check").removeClass("selected-div")}),$("#new_1, #new_2, #new_city, #new_province, #new_country, #new_code").on("change",function(){$("#delivery_address_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500)}),jQuery.fn.extend({upDateDeliveryAddress:function(e){if("new"==e){var r=$("#new_1").val(),t=$("#new_2").val(),a=$("#new_city").val(),o=$("#new_province").val(),s=$("#new_country").val(),i=$("#new_code").val(),d=$("#pargo_point_code").val(),l=3;$("#orderCourierForm #deliver_address1").val(r),$("#orderCourierForm #deliver_address2").val(t),$("#orderCourierForm #deliver_city").val(a),$("#orderCourierForm #deliver_province").val(o),$("#orderCourierForm #deliver_country").val(s),$("#orderCourierForm #courier_detail").val(d),$("#orderCourierForm #delivery_address_type").val(l),1==i.length?$("#orderCourierForm #deliver_code").val("000"+i):2==i.length?$("#orderCourierForm #deliver_code").val("00"+i):3==i.length?$("#orderCourierForm #deliver_code").val("0"+i):i.length>=4&&$("#orderCourierForm #deliver_code").val(i)}else{if("postal"==e)l=1;else if("physical"==e)l=2;r=$("#"+e+"-check").attr("data-address1"),t=$("#"+e+"-check").attr("data-address2"),a=$("#"+e+"-check").attr("data-city"),o=$("#"+e+"-check").attr("data-province"),s=$("#"+e+"-check").attr("data-country"),i=$("#"+e+"-check").attr("data-code");var c="";$("#orderCourierForm #name").val(n),$("#orderCourierForm #deliver_address1").val(r),$("#orderCourierForm #deliver_address2").val(t),$("#orderCourierForm #deliver_city").val(a),$("#orderCourierForm #deliver_province").val(o),$("#orderCourierForm #deliver_country").val(s),$("#orderCourierForm #deliver_code").val(i),$("#orderCourierForm #delivery_address_type").val(l)}var n=$("#orderCourierForm #new_name").val();c=$("#orderCourierForm #new_phone").val();$("#orderCourierForm #deliver_name").val(n),$("#orderCourierForm #deliver_phone").val(c)}}),$("#courier-type").change(function(){$("#delivery-postal, #delivery-physical, #delivery-new").prop("disabled",!1),$("#delivery-postal").prop("checked",!1),$("#delivery-physical").prop("checked",!1),$("#delivery-new").prop("checked",!1),$("#postal-check").removeClass("selected-div"),$("#physical-check").removeClass("selected-div"),$("#new-check").removeClass("selected-div"),$("#new_1").val(""),$("#new_2").val(""),$("#new_city").val(""),$("#new_province").val(""),$("#new_country").val(""),$("#new_code").val(""),$("#cart-courier-cost").html(""),$("#cart-total-order-cost").html(""),$("#total-cart-cost").addClass("no-display"),$("#normal-cart-message").addClass("no-display"),$("#courier-cart-message").addClass("no-display"),$("#country-cart-courier-select").addClass("no-display"),$("#text-cart-courier-cost").addClass("no-display"),$("#delivery_courier_error").fadeOut(500),$("#delivery_address_error").fadeOut(500),$("#pargo_address_error").fadeOut(500);var e=$("#courier-type option:selected").val();switch(""!=e&&$("#cartSubmitStep2").fadeIn(500),e){case"1":if($("#text-cart-courier-cost").removeClass("no-display"),$("#normal-cart-message").removeClass("no-display"),$("#courier-cart-message").addClass("no-display"),(a=$("#cart-total-all-books-price").html().substr(2))<400)var r=$("#normal-cart-courier-cost").html();else r=0;$("#cart-courier-cost").html("R "+r);var t=parseInt(a)+parseInt(r);$("#cart-total-order-cost").html("R "+t),$("#total-cart-cost").removeClass("no-display"),$("#country-cart-pargo-select").addClass("no-display"),$("#delivery-postal").prop("checked",!0),$("#postal-check").addClass("selected-div");break;case"2":$("#text-cart-courier-cost").removeClass("no-display"),$("#normal-cart-message").removeClass("no-display"),$("#courier-cart-message").removeClass("no-display");r=$("#courierit-main-cart-courier-cost").html();$("#cart-courier-cost").html("R "+r);var a=$("#cart-total-all-books-price").html().substr(2);t=parseInt(a)+parseInt(r);$("#cart-total-order-cost").html("R "+t),$("#total-cart-cost").removeClass("no-display"),$("#country-cart-pargo-select").addClass("no-display"),$("#delivery-postal").prop("checked",!0),$("#postal-check").addClass("selected-div");break;case"3":if($("#country-cart-pargo-select").removeClass("no-display"),$("#text-cart-courier-cost").removeClass("no-display"),$("#normal-cart-message").removeClass("no-display"),$("#courier-cart-message").removeClass("no-display"),$("#delivery-postal, #delivery-physical, #delivery-new").prop("disabled",!0),(a=$("#cart-total-all-books-price").html().substr(2))<400)r=$("#pargo-cart-courier-cost").html();else r=0;$("#cart-courier-cost").html("R "+r);t=parseInt(a)+parseInt(r);$("#cart-total-order-cost").html("R "+t),$("#total-cart-cost").removeClass("no-display");break;case"4":$("#text-cart-courier-cost").removeClass("no-display"),$("#cart-courier-cost").html("R 0"),$("#courier-cart-message").addClass("no-display");t=a=$("#cart-total-all-books-price").html().substr(2);$("#cart-total-order-cost").html("R "+t),$("#total-cart-cost").removeClass("no-display"),$("#country-cart-pargo-select").addClass("no-display"),$("#delivery-postal").prop("checked",!1),$("#delivery-physical").prop("checked",!1),$("#delivery-new").prop("checked",!1),$("#postal-check").removeClass("selected-div"),$("#physical-check").removeClass("selected-div"),$("#new-check").removeClass("selected-div"),$("#new_1").val("Graffiti Zambezi Junction"),$("#new_2").val(" "),$("#new_city").val(" "),$("#new_province").val(" "),$("#new_country").val(" "),$("#new_code").val("    "),$("#delivery-new").prop("checked",!0),$("#new-check").addClass("selected-div"),$("#delivery-postal, #delivery-physical, #delivery-new").prop("disabled",!0);break;case"5":$("#country-cart-courier-select").removeClass("no-display"),$("#country-cart-pargo-select").addClass("no-display"),$("#courier-cart-message").addClass("no-display");break;case"6":$("#text-cart-courier-cost").removeClass("no-display"),$("#normal-cart-message").removeClass("no-display"),$("#courier-cart-message").removeClass("no-display");r=$("#courierit-regional-cart-courier-cost").html();$("#cart-courier-cost").html("R "+r);a=$("#cart-total-all-books-price").html().substr(2),t=parseInt(a)+parseInt(r);$("#cart-total-order-cost").html("R "+t),$("#total-cart-cost").removeClass("no-display"),$("#country-cart-pargo-select").addClass("no-display"),$("#delivery-postal").prop("checked",!0),$("#postal-check").addClass("selected-div");break;case"7":$("#text-cart-courier-cost").removeClass("no-display"),$("#normal-cart-message").removeClass("no-display"),$("#courier-cart-message").removeClass("no-display");r=$("#courierit-jhbpta-cart-courier-cost").html();$("#cart-courier-cost").html("R "+r);a=$("#cart-total-all-books-price").html().substr(2),t=parseInt(a)+parseInt(r);$("#cart-total-order-cost").html("R "+t),$("#total-cart-cost").removeClass("no-display"),$("#country-cart-pargo-select").addClass("no-display"),$("#delivery-postal").prop("checked",!0),$("#postal-check").addClass("selected-div")}}),$("#country-select").change(function(){if(5==$("#courier-type option:selected").val()){$("#text-cart-courier-cost").removeClass("no-display"),$("#normal-cart-message").removeClass("no-display"),$("#courier-cart-message").addClass("no-display");var e=$("#country-select option:selected").val();$("#cart-courier-cost").html("R "+e);var r=$("#cart-total-all-books-price").html().substr(2),t=e,a=parseInt(r)+parseInt(t);$("#cart-total-order-cost").html("R "+a),$("#total-cart-cost").removeClass("no-display");var o=$("#country-select option:selected").val();""!=o&&o>0&&($("#delivery_courier_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500))}}),$("#cartSubmitStep2").bind("click touchstart",function(e){if($("#delivery-postal").is(":checked"))var r=$("#delivery-postal").attr("data-src");else if($("#delivery-physical").is(":checked"))r=$("#delivery-physical").attr("data-src");else if($("#delivery-new").is(":checked"))r=$("#delivery-new").attr("data-src");else{var t=!0;$("#delivery_address_error").fadeIn(500),$("#cartSubmitStep2").fadeOut(500)}$.fn.upDateDeliveryAddress(r);var a=$("#orderCourierForm #courier-type").val();if(5==a)var o=$("#orderCourierForm #country-select option:selected").attr("data");else if(3==a)o=$("#orderCourierForm #pargo_point_code").val();var s=$("#cart-courier-cost").html().substr(2),i=$("#orderCourierForm #deliver_address1").val(),d=$("#orderCourierForm #deliver_city").val(),l=$("#orderCourierForm #deliver_code").val(),c=$("#cart-total-order-cost").html().substr(2),n=$("#orderCourierForm #cart-total-all-books-price").html().substr(2);if($("#orderCourierForm #courier_type").val(a),$("#orderCourierForm #courier_cost").val(s),$("#orderCourierForm #courier_detail").val(o),$("#orderCourierForm #total_price").val(c),$("#orderCourierForm #price").val(n),""==a){t=!0;$("#orderCourierForm #courier-type").addClass("validation"),$("#cartSubmitStep2").fadeOut(500)}else $("#orderCourierForm #courier-type").removeClass("validation"),$("#cartSubmitStep2").fadeIn(500);if(5==a&&""==o){t=!0;$("#orderCourierForm #country-select").addClass("validation"),$("#cartSubmitStep2").fadeOut(500)}else $("#orderCourierForm #country-select").removeClass("validation"),$("#cartSubmitStep2").fadeIn(500);if(3==a&&0==i.length)t="pargo-error";if(0==s.length){t=!0;return $("#delivery_courier_error").fadeIn(500),$("#cartSubmitStep2").fadeOut(500),!1}if($("#delivery_courier_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500),(0==i.length||0==d.length||0==l.length)&&3!=a){t=!0;return $("#delivery_address_error").fadeIn(500),$("#cartSubmitStep2").fadeOut(500),!1}if($("#delivery_address_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500),(0==i.length||0==d.length||0==l.length)&&3==a){t=!0;return $("#pargo_address_error").fadeIn(500),$("#cartSubmitStep2").fadeOut(500),!1}if($("#pargo_address_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500),0==c.length){t=!0;return $("#delivery_courier_error").fadeIn(500),$("#cartSubmitStep2").fadeOut(500),!1}$("#delivery_courier_error").fadeOut(500),$("#cartSubmitStep2").fadeIn(500),0==t?$("#orderCourierForm").submit():"pargo-error"==t?($("#cartSubmitStep2").fadeOut(500),$("#pargo_address_error").fadeIn(500)):($("#cartSubmitStep2").fadeOut(500),$("#delivery_incomplete").fadeIn(500))}),$("#orderCourierForm").submit(function(e){var r=$("#deliver_address1").val(),t=$("#courier_type").val(),a=$("#courier_cost").val(),o=$("#price").val(),s=$("#total_price").val(),i=$("#delivery_address_type").val();0!=t.length&&0!=a.length||($("#orderCourierForm #courier-type").addClass("validation"),$("#cartSubmitStep2").fadeOut(500),$("#delivery_courier_error").fadeIn(500),e.preventDefault()),0!=o.length&&0!=s.length&&0!=a.length||($("#orderCourierForm #courier-type").addClass("validation"),$("#cartSubmitStep2").fadeOut(500),e.preventDefault(),location.reload()),0!=i.length&&0!=r.length||($("#delivery_address_error").fadeIn(500),$("#cartSubmitStep2").fadeOut(500),e.preventDefault())}),$("[id^=payment-]").bind("click touchstart",function(e){if($(this).is(":checked")){var r=$(this).val();$("#payment_type_error").fadeOut(500),$("#paymentSubmit").fadeIn(500),$("[id^=payment-]").prop("checked",!1),$(this).prop("checked",!0),$("[id^=payment-check-]").removeClass("selected-div"),$("#payment-check-"+r).addClass("selected-div")}else $("#payment_type_error").fadeIn(500),$("#paymentSubmit").fadeOut(500)}),$("#orderPaymentForm").submit(function(e){var r=$("#deliver_address1").val(),t=$("#courier_type").val(),a=$("#courier_cost").val(),o=$("#price").val(),s=$("#total_price").val();0!=t.length&&0!=a.length||($("#paymentSubmit").fadeOut(500),$("#delivery_error").fadeIn(500),e.preventDefault()),0!=o.length&&0!=s.length&&0!=a.length||($("#delivery_error").fadeIn(500),$("#paymentSubmit").fadeOut(500),e.preventDefault()),0==s.length&&($("#delivery_error").fadeIn(500),$("#paymentSubmit").fadeOut(500),e.preventDefault()),0==r.length&&($("#delivery_error").fadeIn(500),$("#paymentSubmit").fadeOut(500),e.preventDefault())}),$("#courier-type").trigger("change"),$("#country-select").trigger("change"),$("#tc").trigger("change"),3==$("#courier-type").val()&&$("#delivery-new").prop("checked",!0),$("#delivery-new").is(":checked")&&3!=$("#courier-type").val()?$("#new_1, #new_2, #new_city, #new_province, #new_country, #new_code").prop("disabled",!1):$("#delivery-new").is(":checked")&&3==$("#courier-type").val()&&$("#new_1, #new_2, #new_city, #new_province, #new_country, #new_code").prop("disabled",!0),$("#tc").is(":checked")?$("#cartSubmitStep1").removeClass("no-display"):$("#cartSubmitStep1").addClass("no-display"),$("#tc").click(function(e){$(this).is(":checked")?$("#cartSubmitStep1").removeClass("no-display"):$("#cartSubmitStep1").addClass("no-display")}),$('[data-toggle="tooltip"]').tooltip(),$("a.email").each(function(){var e=$(this).text().replace(" at ","@");$(this).attr("href","mailto:"+e),$(this).text(e)}),$("a.email-event").each(function(){var e=$(this).attr("data-type"),r=$(this).attr("data-date"),t=$(this).text().replace(" at ","@");$(this).attr("href","mailto:"+t+"?subject="+e+": "+r),$(this).text(t)}),$("#scrollToTop").bind("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"slow"),$("#static-header").css({position:"fixed"})}),$("#scrollToTop").css("display","none"),$(window).scroll(function(){$(window).scrollTop()>0?$("#scrollToTop").fadeIn("slow"):$("#scrollToTop").fadeOut("slow")}),"af"==$("#searchForm #language").val())var r="<span class='text-small-normal red right'>Wys meer<i class='fa fa-chevron-down icon-spacing' aria-hidden='true'></i></span>",t="<span class='text-small-normal red right'>Wys minder<i class='fa fa-chevron-up icon-spacing' aria-hidden='true'></i></span>";else r="<span class='text-small-normal red right'>Show more<i class='fa fa-chevron-down icon-spacing' aria-hidden='true'></i></span>",t="<span class='text-small-normal red right'>Show less<i class='fa fa-chevron-up icon-spacing' aria-hidden='true'></i></span>";$("[id^=showmore_]").each(function(){$vId=$(this).attr("data-src"),$(".showmore_"+$vId).showMore({speedDown:300,speedUp:300,height:"96px",showText:r,hideText:t})}),$(".my-cart-btn").on("click",function(){var e=$(this).parent().parent().children(".thumb-book-image").find("img").eq(0);flyToElement($(e),$("#cart-anchor")),addToCart($(this).data("id"))}),$(".my-cart-btn-s").on("click",function(){var e=$(this).parent().parent().parent().children(".thumb-book-image").find("img").eq(0);flyToElement($(e),$("#cart-anchor")),addToCart($(this).data("id"))}),$("[id^=move-to-cart-]").click(function(e){var r=$(this).attr("data-id"),t=$(this).attr("data-src"),a=$(this).attr("data-url"),o=$("#searchForm #language").val();if("af"==o)var s="Jammer, die boek is nie oorgelaai na jou mandjie nie! Probeer asseblief weer.\n\nKontak Graffiti indien die fout herhaaldelik voorkom.";else if("en"==o)s="An error occurred. The book was not moved to your cart. Please try again.\n\nPlease contact Graffiti if the error is not resolved.";$(this).parent().parent().children(".col-center").find("img").eq(0);!1!==addToCart(r)?$.post("order_process.php",{type:"delete-wish-book",wish_id:t},function(e){"error"==e?alert(s):window.location.href=a}):alert(s)}),$("#resultSort").on("change",function(e){var r=$(this).val(),t=$("#current-url").val();r.length>0&&(window.location.href=t+"/"+r)}),$("#pageSelf").click(function(e){e.preventDefault()}),$("#bookinfoIcon").click(function(e){var r=$(this).attr("data-title"),t=$(this).attr("data-dimensions"),a=$(this).attr("data-weight"),o=$(this).attr("data-pages"),s=$(this).attr("data-format");$("#bookinfo #heading").html(r),t.length>0?$("#bookinfo #dimensions").html(t):$("#bookinfo #dimensions").html("-"),a>0?$("#bookinfo #weight").html(a+"g"):$("#bookinfo #weight").html("-"),o>0?$("#bookinfo #no-pages").html(o):$("#bookinfo #no-pages").html("-"),$("#bookinfo #format").html(s)}),$("[id^=orderhistoryshowbooks_]").click(function(e){$vId=$(this).attr("data-id"),$("#orderhistorybooksdetail_"+$vId).removeClass("no-display"),$("#orderhistoryshowbooks_"+$vId).addClass("no-display"),$("#orderhistoryshowbooks_"+$vId).removeClass("fa"),$("#orderhistoryhidebooks_"+$vId).removeClass("no-display"),$("#orderhistoryhidebooks_"+$vId).addClass("fa")}),$("[id^=orderhistoryhidebooks_]").click(function(e){$vId=$(this).attr("data-id"),$("#orderhistorybooksdetail_"+$vId).addClass("no-display"),$("#orderhistoryshowbooks_"+$vId).removeClass("no-display"),$("#orderhistoryshowbooks_"+$vId).addClass("fa"),$("#orderhistoryhidebooks_"+$vId).addClass("no-display"),$("#orderhistoryhidebooks_"+$vId).removeClass("fa")}),$("[id^=orderhistorypayicon_]").click(function(e){$vId=$(this).attr("data-id");var r=$(this).attr("data-pay-books"),t=$(this).attr("data-pay-postal"),a=$(this).attr("data-pay-total"),o=$(this).attr("data-pay-paid"),s=$(this).attr("data-pay-type");$("#orderhistorypay #paid").html(o),$("#orderhistorypay #method").html(s),$("#orderhistorypay #price").html(r),$("#orderhistorypay #delivery").html(t),$("#orderhistorypay #total").html(a)}),$("[id^=orderhistorydispatchicon_]").click(function(e){$vId=$(this).attr("data-id");var r=$(this).attr("data-dispatch"),t=$(this).attr("data-dispatch-method"),a=$(this).attr("data-dispatch-cost"),o=$(this).attr("data-dispatch-tracking"),s=$(this).attr("data-dispatch-detail"),i=$(this).attr("data-dispatch-message");$("#orderhistorydispatch #dispatch").html(r),$("#orderhistorydispatch #method").html(t),$("#orderhistorydispatch #cost").html(a),$("#orderhistorydispatch #tracking").html(o),$("#orderhistorydispatch #detail").html(s),$("#orderhistorydispatch #message").html(i)}),$("[id^=topSel_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height();$("#topSelCircle_"+e).css({top:t+"px"})}),$("[id^=topSelC_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height();$("#topSelCCircle_"+e).css({top:t+"px"})}),$("[id^=newSel_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height();$("#newSelCircle_"+e).css({top:t+"px"})}),$("[id^=newSelC_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height();$("#newSelCCircle_"+e).css({top:t+"px"})}),$("[id^=specialSel_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height();$("#specialSelCircle_"+e).css({top:t+"px"})}),$("[id^=soonSel_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height();$("#soonSelCircle_"+e).css({top:t+"px"})}),$("[id^=bookSel_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height()-20;$("#bookSelCircle_"+e).css({top:t+"px"})}),$("[id^=outSel_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).height()-20,a=$(r).width()+4;$("#bookOutBanner_"+e).css({top:t+"px",width:a+"px"})}),$("[id^=imageEvent_]").each(function(){var e=$(this).attr("data-id"),r=$(this).find("img").eq(0),t=$(r).width()+4;$("photoBanner_"+e).css({width:t+"px"})}),$.fn.setHomeRowHeight(),jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())}}),$(function(){$("#searchForm #keyword").autocomplete({source:"include/AutoCompleteSearch.php?section="+$("#searchForm #section").val(),minLength:5,delay:500,select:function(e,r){$("#searchForm #cat").val(r.item.value),$("#searchForm #autocomplete").val(1),$("#searchForm").submit()}})}),$("#searchForm #searchButton").on("click",function(e){e.preventDefault();var r=$("#searchForm #cat").val(),t=$("#searchForm #keyword").val();0==r.length&&$("#searchForm #cat").val(t),$("#searchForm").submit()}),$("#password_forgot").on("click",function(){alert(8),$("#login").fadeOut(slow),$("#password_reset").fadeIn(slow)}),$("#password_forgot").on("click",function(){$("#login").fadeOut(slow),$("#password_reset").fadeIn(slow)}),$.fn.equalHeight=function(){var e=0;return this.each(function(r,t){var a=$(t).height();e=Math.max(e,a)}).height(e)},$(document).on("hidden.bs.modal",function(e){}),$(function(){var e=$("#searchtoggl i"),r=$("#searchbar");$("#welcomeLine ul li a").on("click",function(t){"searchtoggl"==$(this).attr("id")&&(t.preventDefault(),r.is(":visible")?e.removeClass("fa-search-minus").addClass("fa-search"):e.removeClass("fa-search").addClass("fa-search-minus"),r.slideToggle(300,function(){})),"shoppingshow"==$(this).attr("id")&&t.preventDefault()}),$("#searchForm").submit(function(e){})}),$("#printForm").on("click",function(){var e=$(this).attr("data-src"),r=document.getElementById(e),t=window.open("","Print-Window");t.document.open(),t.document.write('<html><body onload="window.print()">'+r.innerHTML+"</body></html>"),t.document.close(),setTimeout(function(){t.close()},10)}),$.fn.setHomeRowHeight=function(){$("[id^=home-book-row-]").each(function(){var e=0,r=0,t=0,a=0,o=0,s=0;$(".thumb-book-image",this).each(function(){e<$(this).height()&&(e=$(this).height())}),$(".thumb-book-image",this).each(function(){$(this).css("height",e+"px")}),$(".thumb-book-heading",this).each(function(){r<$(this).height()&&(r=$(this).height())}),$(".thumb-book-heading",this).each(function(){$(this).css("height",r+"px")}),$(".thumb-book-author",this).each(function(){t<$(this).height()&&(t=$(this).height())}),$(".thumb-book-author",this).each(function(){$(this).css("height",t+"px")}),$(".thumb-book-discount",this).each(function(){a<$(this).height()&&(a=$(this).height())}),$(".thumb-book-discount",this).each(function(){$(this).css("height",a+"px")}),$(".thumb-book-price",this).each(function(){o<$(this).height()&&(o=$(this).height())}),$(".thumb-book-price",this).each(function(){$(this).css("height",o+"px")}),$(".thumb-book-shop",this).each(function(){s<$(this).height()&&(s=$(this).height())}),$(".thumb-book-shop",this).each(function(){$(this).css("height",s+"px")})})};